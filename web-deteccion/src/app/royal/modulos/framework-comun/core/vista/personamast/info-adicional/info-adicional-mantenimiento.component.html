<div class="p-grid">

    <p-divider align="left">
        <div class="p-d-inline-flex p-ai-center">
            <i class="pi pi-bars p-mr-2"></i>
            <b>Tipos de Personas</b>&nbsp;&nbsp;
            <div class="p-fluid p-formgrid p-grid botonesSeccion" style="margin-top: 20px;">
                <div class="p-col-12 p-md-12">
                    <button pButton pRipple [disabled]="!objetoTitulo.puedeEditar || !esPersona" type="button" label="Agregar Detalle" icon="fad fa-layer-plus" class="p-button-outlined" (click)="agregarDetalle()"></button>
                </div>

            </div>
        </div>
    </p-divider>

    <div class="p-col-12">
        <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col-12 p-md-6">
                <p-table [value]="dto.dtoMaPersonapersonagrupo" [responsive]="true" [showCurrentPageReport]="true" currentPageReportTemplate="Mostrando data registros" [style]="{ width: '100%'}" [scrollable]="true" scrollHeight="250px">
                    <ng-template pTemplate="header">
                        <tr>
                            <th class="tablaHeaderCodigoSmall">Acción</th>
                            <th class="tablaHeaderCodigoGrande">Tipo Persona</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-row let-ri="rowIndex">
                        <tr *ngIf="row.acciones == 'NUEVO' || row.acciones == 'UPDATE'">
                            <td class="tablaColumnaCodigoSmall">
                                <span class="p-column-title">Acción</span>
                                <table>
                                    <tr>
                                        <th>
                                            <button pButton pRipple type="button" icon="fal fa-trash-alt" [disabled]="!objetoTitulo.puedeEditar || !esPersona" class="p-button-rounded p-button-danger p-button-text botonGrilla" title="Eliminar" (click)="coreEliminar(row,ri)"></button>
                                        </th>
                                    </tr>
                                </table>

                            </td>
                            <td class="tablaColumnaCodigoGrande">

                                <p-dropdown [(ngModel)]="row.personagrupo" [filter]="true" [options]="lstGrupoPersona" [readonly]="!esPersona" [disabled]="!objetoTitulo.puedeEditar" appendTo="body" [style]="{'width':'100%'}">
                                </p-dropdown>
                            </td>

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="2">
                                No existen registros para mostrar
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <div class="p-field p-col-12 p-md-4"></div>
            <div class="p-field p-col-12 p-md-12">
                <label>Los Tipos de Personas son restringidos y sólo utilizados en ciertas opciones de los módulos</label>
            </div>


        </div>
    </div>
    <br>

    <p-divider align="left" *ngIf="parametroBanco">
        <div class="p-d-inline-flex p-ai-center">
            <i class="pi pi-bars p-mr-2"></i>
            <b>Cuentas Bancarias de la Persona</b>&nbsp;&nbsp;
            <div class="p-fluid p-formgrid p-grid botonesSeccion" style="margin-top: 20px;">
                <div class="p-col-12 p-md-12">
                    <button pButton pRipple [disabled]="!objetoTitulo.puedeEditar || !esPersona" type="button" label="Agregar Detalle" icon="fad fa-layer-plus" class="p-button-outlined" (click)="agregarDetalleBanco()"></button>
                </div>

            </div>
        </div>
    </p-divider>

    <div class="p-col-12" *ngIf="parametroBanco">
        <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col-12 p-md-12">
                <p-table [value]="dto.dtoPersonacuentabancaria" [responsive]="true" [style]="{ width: '100%'}" [scrollable]="true" scrollHeight="250px">
                    <ng-template pTemplate="header">
                        <tr>
                            <th class="tablaHeaderCodigoSmall2">Acción</th>
                            <th class="tablaHeaderCodigoSmall">#</th>
                            <th class="tablaHeaderCodigo">Banco</th>
                            <th class="tablaHeaderEstado">Moneda</th>
                            <th class="tablaHeaderCodigoGrande2">Cuenta Bancaria</th>
                            <th class="tablaHeaderCodigo">Tipo Cuenta</th>
                            <th class="tablaHeaderCodigoChico">Estado</th>
                            <th class="tablaHeaderCodigoChico">Últ. Usuario</th>
                            <th class="tablaHeaderCodigoChico">Última Modif.</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-row let-ri="rowIndex">
                        <tr [pEditableRow]="row" *ngIf="row.acciones == 'NUEVO' || row.acciones == 'UPDATE'">
                            <td class="tablaColumnaCodigoSmall2">
                                <span class="p-column-title">Acción</span>
                                <table>
                                    <tr>
                                        <th>
                                            <button pButton pRipple type="button" icon="fal fa-trash-alt" class="p-button-rounded p-button-danger p-button-text botonGrilla" [disabled]="!objetoTitulo.puedeEditar || !esPersona" title="Eliminar" (click)="coreEliminarBanco(row,ri)"></button>
                                        </th>
                                    </tr>
                                </table>

                            </td>
                            <td pEditableColumn class="tablaColumnaCodigoSmall">
                                <span class="p-column-title">#</span> {{row.secuencia}}
                            </td>

                            <td class="tablaColumnaCodigo">
                                <p-dropdown [(ngModel)]="row.bancocodigo" [filter]="true" [options]="lstBancos" [readonly]="!esPersona" [disabled]="!objetoTitulo.puedeEditar" appendTo="body" [style]="{'width':'100%'}">
                                </p-dropdown>
                            </td>

                            <td class="tablaColumnaEstado">
                                <p-dropdown [(ngModel)]="row.monedacodigo" [filter]="true" [options]="lstMonedas" [readonly]="!esPersona" [disabled]="!objetoTitulo.puedeEditar" appendTo="body" [style]="{'width':'100%'}">
                                </p-dropdown>
                            </td>

                            <td pEditableColumn class="tablaColumnaCodigoGrande2"><span class="p-column-title">Cuenta Bancaria</span>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input [(ngModel)]="row.cuentabancarianumero" [readonly]="!esPersona" [style]="{'width':'100%'}" pKeyFilter="int" [disabled]="!objetoTitulo.puedeEditar" maxlength="20">
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{row.cuentabancarianumero}}
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td class="tablaColumnaCodigo">
                                <p-dropdown [(ngModel)]="row.tipocuenta" [filter]="true" [options]="lstTipoCuenta" [readonly]="!esPersona" [disabled]="!objetoTitulo.puedeEditar" appendTo="body" [style]="{'width':'100%'}">
                                </p-dropdown>
                            </td>

                            <td class="tablaColumnaCodigoChico"><span class="p-column-title">Estado</span>
                                <p-dropdown [(ngModel)]="row.estado" [options]="lstEstadoBanco" [readonly]="!esPersona" [disabled]="!objetoTitulo.puedeEditar" appendTo="body" [disabled]="!objetoTitulo.puedeEditar" [style]="{'width':'100%'}"></p-dropdown>
                            </td>

                            <td class="tablaColumnaCodigoChico">
                                <span class="p-column-title">Últ. Usuario</span> {{row.ultimousuario}}
                            </td>

                            <td class="tablaColumnaCodigoChico">
                                <span class="p-column-title">Última Modif.</span> {{row.ultimafechamodif | date: 'dd/MM/yyyy'}}
                            </td>

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="9">
                                No existen registros para mostrar
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>


        </div>
    </div>
</div>