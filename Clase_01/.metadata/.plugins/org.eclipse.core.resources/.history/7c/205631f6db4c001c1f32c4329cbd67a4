package com.royal.genericos;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.royal.util.SeguridadUsuarioActual;
import com.royal.util.UString;

public class GenericoRest {
	
	@Autowired
	private HttpServletRequest request;

	public SeguridadUsuarioActual getUsuarioActual() {
		ObjectMapper mapper = new ObjectMapper();
		String ua = request.getHeader("usuarioactual");
		if (UString.estaVacio(ua))
			return null;
		try {
			ObjectMapper mapper2 = new ObjectMapper();
			SeguridadUsuarioActual usu = mapper2.readValue(ua, SeguridadUsuarioActual.class);
			return usu;
		} catch (JsonProcessingException e) {
			return null;
		}
	}
}
