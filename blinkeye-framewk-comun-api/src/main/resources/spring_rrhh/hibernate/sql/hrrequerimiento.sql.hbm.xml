<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<sql-query name="hrrequerimiento.postulantesContar">
	<![CDATA[
		SELECT 
		count(1)
		FROM HR_POSTULANTE A
		where a.Postulante = ISNULL(:p_postulante, A.Postulante)
		and A.NombreCompleto like '%' + isnull(:p_nombre, '') + '%'
	]]>
	</sql-query>
	<sql-query name="hrrequerimiento.postulantesListar">
	<![CDATA[
		SELECT 
		A.POSTULANTE AS "postulante", 
		LTRIM(RTRIM(UPPER(A.NOMBRECOMPLETO))) AS "nombre", 
		LTRIM(RTRIM(UPPER(MA_MISCELANEOSDETALLE.DESCRIPCIONLOCAL))) AS "tipoDocumentoNombre", 
		LTRIM(RTRIM(UPPER(A.DOCUMENTO))) AS "documento", 
		e.DescripcionLocal AS "estadoNombre"
		FROM HR_POSTULANTE A
		LEFT JOIN MA_MISCELANEOSDETALLE ON MA_MISCELANEOSDETALLE.APLICACIONCODIGO = 'HR' AND MA_MISCELANEOSDETALLE.COMPANIA = '999999' AND MA_MISCELANEOSDETALLE.CODIGOTABLA = 'TIPODOCI' 
			AND MA_MISCELANEOSDETALLE.CODIGOELEMENTO = A.TIPODOCUMENTO
		LEFT JOIN MA_MISCELANEOSDETALLE e ON e.APLICACIONCODIGO = 'HR' AND e.COMPANIA = '999999' AND e.CODIGOTABLA = 'ESTPOSTULA' 
			AND e.CODIGOELEMENTO = A.Estado
		where a.Postulante = ISNULL(:p_postulante, A.Postulante)
		and A.NombreCompleto like '%' + isnull(:p_nombre, '') + '%'
		ORDER BY A.NOMBRECOMPLETO
	]]>
	</sql-query>
	<sql-query name="hrrequerimiento.personalReclutamientoContar">
	<![CDATA[
		SELECT
		COUNT(1)
		FROM EmpleadoMast
		INNER JOIN personamast on PERSONAMAST.PERSONA = EMPLEADOMAST.EMPLEADO
		WHERE
		EXISTS (SELECT 1 FROM HR_PERSONALCARGORECLUTAMIENTO WHERE HR_PERSONALCARGORECLUTAMIENTO.CODIGOPUESTO = EmpleadoMast.CODIGOCARGO)
		AND EstadoEmpleado = '0'
		AND EmpleadoMast.CompaniaSocio = ISNULL(:p_compania, EmpleadoMast.CompaniaSocio)
		AND EmpleadoMast.Empleado = ISNULL(:p_empleado, EmpleadoMast.Empleado)
		AND EmpleadoMast.TipoPlanilla = ISNULL(:p_tipoplanilla, EmpleadoMast.TipoPlanilla)
		AND PersonaMast.Busqueda LIKE '%' + ISNULL(:p_nombre, '') + '%'
	]]>
	</sql-query>
	<sql-query name="hrrequerimiento.personalReclutamientoListar">
	<![CDATA[
		SELECT
		EmpleadoMast.CompaniaSocio AS "compania",
		EmpleadoMast.EMPLEADO AS "empleado",
		LTRIM(RTRIM(UPPER(PERSONAMAST.NOMBRECOMPLETO))) AS "nombre", 
		LTRIM(RTRIM(UPPER(COMPANYOWNER.DESCRIPTION))) AS "companiaNombre", 
		LTRIM(RTRIM(UPPER(MA_UNIDADNEGOCIO.DESCRIPCIONLOCAL))) AS "unidadNegocioNombre", 
		LTRIM(RTRIM(UPPER(AC_SUCURSAL.DESCRIPCIONLOCAL))) AS "sucursalNombre",
		LTRIM(RTRIM(UPPER(HR_UNIDADOPERATIVA.DESCRIPCION))) AS "unidadOperativaNombre",
		LTRIM(RTRIM(UPPER(PR_TIPOPLANILLA.DESCRIPCION))) AS "tipoPlanillaNombre", 
		LTRIM(RTRIM(UPPER(AC_COSTCENTERMST.LOCALNAME))) AS "centrocostoNombre", 
		LTRIM(RTRIM(UPPER(HR_PUESTOEMPRESA.DESCRIPCION))) AS "puestoNombre", 
		LTRIM(RTRIM(UPPER(HR_POSICIONEMPRESA.DESCRIPCION))) AS "unidadOrganigramaNombre", 
		LTRIM(RTRIM(UPPER(HR_CARGOSMAST.DESCRIPCIONLOCAL))) AS "categoriaNombre", 
		LTRIM(RTRIM(UPPER(HR_GRADOSALARIOMAST.DESCRIPCIONLOCAL))) AS "gradoSalarioNombre", 
		LTRIM(RTRIM(UPPER(HR_TIPOCONTRATO.DESCRIPCION))) AS "tipoContratoNombre", 
		convert(varchar, EMPLEADOMAST.FECHAINICIOCONTRATO, 103) AS "inicioContrato", 
		convert(varchar, EMPLEADOMAST.FECHAFINCONTRATO, 103) AS "finContrato",
		EMPLEADOMAST.CORREOINTERNO AS "correoInterno",
		LTRIM(RTRIM(UPPER(MONEDAMAST.DESCRIPCIONCORTA))) AS "monedaPago", 
		JEFE.NOMBRECOMPLETO AS "jefeResponsable", 
		LTRIM(RTRIM(UPPER(JEFECOMPANIA.DESCRIPTION))) AS "jefeResponsableCompania", 
		LTRIM(RTRIM(UPPER(AFEMST.LOCALNAME))) AS "proyecto", 
		LTRIM(RTRIM(UPPER(HR_TIPOTRABAJADOR.DESCRIPCIONLOCAL))) AS "tipoTrabajadorNombre",
		LTRIM(RTRIM(UPPER(AS_TIPOHORARIO.DESCRIPCIONLOCAL))) AS "tipoHorarioNombre"
		FROM EmpleadoMast
		INNER JOIN personamast on PERSONAMAST.PERSONA = EMPLEADOMAST.EMPLEADO
		LEFT JOIN COMPANYOWNER ON EMPLEADOMAST.COMPANIASOCIO = COMPANYOWNER.COMPANYOWNER
		LEFT JOIN MA_UNIDADNEGOCIO ON EMPLEADOMAST.UNIDADNEGOCIOASIGNADA = MA_UNIDADNEGOCIO.UNIDADNEGOCIO
		LEFT JOIN AC_SUCURSAL ON EMPLEADOMAST.SUCURSAL = AC_SUCURSAL.SUCURSAL
		LEFT JOIN HR_UNIDADOPERATIVA ON EMPLEADOMAST.UNIDADOPERATIVA = HR_UNIDADOPERATIVA.UNIDADOPERATIVA
		LEFT JOIN PR_TIPOPLANILLA ON EMPLEADOMAST.TIPOPLANILLA = PR_TIPOPLANILLA.TIPOPLANILLA
		LEFT JOIN AC_COSTCENTERMST ON EMPLEADOMAST.CENTROCOSTOS = AC_COSTCENTERMST.COSTCENTER
		LEFT JOIN HR_PUESTOEMPRESA ON EMPLEADOMAST.CODIGOCARGO = HR_PUESTOEMPRESA.CODIGOPUESTO
		LEFT JOIN HR_POSICIONEMPRESA ON EMPLEADOMAST.CODIGOUNIDAD = HR_POSICIONEMPRESA.CODIGOPOSICION AND EMPLEADOMAST.COMPANIASOCIO = HR_POSICIONEMPRESA.COMPANYOWNER
		LEFT JOIN HR_TIPOCONTRATO ON EMPLEADOMAST.TIPOCONTRATO = HR_TIPOCONTRATO.TIPOCONTRATO
		LEFT JOIN HR_CARGOSMAST ON EMPLEADOMAST.CARGO = HR_CARGOSMAST.CARGO
		LEFT JOIN HR_GRADOSALARIOMAST ON EMPLEADOMAST.GRADOSALARIO = HR_GRADOSALARIOMAST.GRADOSALARIO
		LEFT JOIN MONEDAMAST ON EMPLEADOMAST.MONEDAPAGO = MONEDAMAST.MONEDACODIGO
		LEFT JOIN PERSONAMAST JEFE ON EMPLEADOMAST.JEFERESPONSABLE = JEFE.PERSONA
		LEFT JOIN COMPANYOWNER JEFECOMPANIA ON EMPLEADOMAST.JEFERESPONSABLECOMPANIA = JEFECOMPANIA.COMPANYOWNER
		LEFT JOIN AFEMST ON EMPLEADOMAST.AFE = AFEMST.AFE
		LEFT JOIN HR_TIPOTRABAJADOR ON EMPLEADOMAST.TIPOTRABAJADOR = HR_TIPOTRABAJADOR.TIPOTRABAJADOR
		LEFT JOIN AS_TIPOHORARIO ON EMPLEADOMAST.TIPOHORARIO = AS_TIPOHORARIO.TIPOHORARIO
		WHERE
		EXISTS (SELECT 1 FROM HR_PERSONALCARGORECLUTAMIENTO WHERE HR_PERSONALCARGORECLUTAMIENTO.CODIGOPUESTO = EmpleadoMast.CODIGOCARGO)
		AND EstadoEmpleado = '0'
		AND EmpleadoMast.CompaniaSocio = ISNULL(:p_compania, EmpleadoMast.CompaniaSocio)
		AND EmpleadoMast.Empleado = ISNULL(:p_empleado, EmpleadoMast.Empleado)
		AND EmpleadoMast.TipoPlanilla = ISNULL(:p_tipoplanilla, EmpleadoMast.TipoPlanilla)
		AND PersonaMast.Busqueda LIKE '%' + ISNULL(:p_nombre, '') + '%'
		ORDER BY PersonaMast.NombreCompleto
	]]>
	</sql-query>
</hibernate-mapping>
